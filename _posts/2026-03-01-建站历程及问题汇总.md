---
layout: post
title: 建站历程及问题汇总
date: 2026-03-01 10:54 +0800
description: '建站历程及问题汇总'
category: '创建网站'
tags: [建站]
---
# 为什么建站

很早就想自己搭建一个个人博客，但一直没有行动。最近到了需要“谋出路”的阶段，也想系统复盘过去学过的内容，正好借此机会整理输出、增强竞争力。

# 建站方案

## Notion + NotionNext + Vercel

### 感受

中文教程比较完善、细致，跟着做基本不会出大问题。不过对我来说，后续个性化配置偏复杂，还需要额外熟悉 Notion 的使用，所以后来就没有继续深入。

教程链接：<https://docs.tangly1024.com/article/vercel-deploy-notion-next>

## Chirpy（Jekyll）+ GitHub Pages

### 感受

官方教程是英文的，社区里也有不少“魔改版”和中文教程。整体配置相对集中，改起来省心；如果不深入定制，只是发文章会很简单，迁移也方便。注意认真看教程里各处链接的说明，否则容易产生困惑。

教程链接：<https://chirpy.cotes.page/posts/getting-started/#creating-a-site-repository>

### 遇到的问题

#### WSL 提示：检测到 localhost 代理配置，但未镜像到 WSL（NAT 模式不支持 localhost 代理）

当你在 WSL2 中看到类似提示：

```powershell
PS C:\Users\User> wsl
wsl: 检测到 localhost 代理配置，但未镜像到 WSL。NAT 模式下的 WSL 不支持 localhost 代理。
```

这通常意味着：宿主机启用了 localhost 代理，但当前 WSL 网络模式为 NAT，WSL 无法直接使用该代理。

如果你需要让 WSL 使用宿主机代理，可以尝试切换到 mirrored 网络模式并开启自动代理：

1. 在 `%UserProfile%`（如 `C:\Users\<用户名>`）下创建或编辑 `.wslconfig` 文件。
2. 写入：

```ini
[experimental]
autoMemoryReclaim=gradual
networkingMode=mirrored
dnsTunneling=true
firewall=true
autoProxy=true
```

3. 保存后执行：

```powershell
wsl --shutdown
```

4. 再次启动 WSL，提示应消失，且可使用宿主机代理。

如果你不需要在 WSL 中使用代理，也可以在 `.wslconfig` 中关闭自动代理以避免每次启动提示：

```ini
[experimental]
autoProxy=false
```

注意：`mirrored` 网络模式在部分 Windows 版本中属于预览功能，可能需要加入 Release Preview Channel 才能使用；若切换后网络异常，可恢复 NAT 模式并改用手动配置代理。

#### Docker 创建容器失败，或 VS Code 中无法使用 Copilot

常见原因是：Docker 无法使用 Windows 下的代理，导致拉镜像/依赖下载失败，从而引发 Dev Container 启动失败或 VS Code 扩展不可用。

可选处理方式：

- 方案 1：在 `.devcontainer/devcontainer.json` 中配置代理相关环境变量。
- 方案 2（未尝试）：在 Docker Desktop 中设置代理（可参考：<https://zhuanlan.zhihu.com/p/586645526>）。

如果仍然不行，可以检查 Clash 等代理工具的设置（例如是否开启“允许局域网”、TUN 模式等）。一般把完整报错信息交给 AI 分析，能很快定位原因；但在修改网络/代理配置前，建议先确认如何恢复原设置，避免把环境改“不可逆”。

#### 在 Dev Container 配置代理后，SSH 连不上 GitHub（`git@github.com:22` 超时）

背景：为了让 Dev Container 能顺利拉依赖、并解决 VS Code Copilot 无法连接的问题，我在 `.devcontainer/devcontainer.json` 里设置了代理环境变量（如 `HTTP_PROXY`/`HTTPS_PROXY`/`NO_PROXY`）。

但随之出现一个“看起来不相关”的问题：`git` 走 SSH 推送/拉取时连不上 GitHub。

**现象**

- `git pull`/`git push` 卡住或报超时
- 直连测试：

```bash
ssh -T git@github.com
```

可能看到类似错误（关键点是连接到一个不正常的 IP）：

```text
Connection timed out during banner exchange
Connection to 198.18.x.x port 22 timed out
```

**原因（本质）**

在当前环境里，`github.com` 会被解析到 `198.18.0.0/15` 这个网段（常见于代理软件的 fake-ip 机制），导致 `ssh git@github.com` 实际上并没有连到 GitHub 的真实地址，于是 22 端口握手阶段就超时。

可用下面命令快速确认：

```bash
getent hosts github.com
```

如果输出是 `198.18.x.x github.com`，基本就坐实了。

**解决（推荐）：让 GitHub SSH 走 443 端口**

GitHub 提供了 `ssh.github.com:443` 作为 SSH 的替代入口，可以绕开 22 端口被封/被劫持的问题。

做法 1：在 `~/.ssh/config` 增加配置（推荐，最省事，`origin` 不用改）

```sshconfig
Host github.com
  HostName ssh.github.com
  Port 443
  User git
```

如果你使用特定私钥（例如 `~/.ssh/id_ed25519`），也可以补上：

```sshconfig
  IdentityFile ~/.ssh/id_ed25519
  IdentitiesOnly yes
```

权限别忘了收紧：

```bash
chmod 600 ~/.ssh/config
```

验证：

```bash
ssh -T git@github.com
git ls-remote origin | head
```

做法 2：直接把仓库 remote 改成显式 443（不依赖 `~/.ssh/config`）

```bash
git remote set-url origin ssh://git@ssh.github.com:443/<user>/<repo>.git
```

**备选方案**

- 改用 HTTPS remote（不走 SSH）：

```bash
git remote set-url origin https://github.com/<user>/<repo>.git
```

- “根治”方向：调整宿主机代理/DNS/fake-ip 规则，让 `github.com`、`ssh.github.com` 解析回真实 IP（不同代理软件/模式差异较大，且容易影响其他网络行为，建议先确保可回滚）。
